<?xml version="1.0" encoding="UTF-8"?>
<!--
  ðŸ“„ Logback Configuration Overview

  This file defines the logging behavior for the Selenium framework using SLF4J + Logback.

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ðŸ”§ Logger Definitions:
    - com.darkuros.selenium â†’ Level: INFO
      Captures framework-level logs at INFO and above.
      Logs routed to both console (WARN only) and rolling file if logging is enabled.
      Additivity disabled to prevent log propagation.

    - org.testng.internal â†’ Level: WARN
      Suppresses verbose internal TestNG logs (e.g., method sorting, graph creation).
      Logs routed to both console (WARN only) and rolling file if logging is enabled.
      Additivity disabled.

    - io.github.bonigarcia â†’ Level: WARN
      Silences WebDriverManager logs.
      Logs routed to both console (WARN only) and rolling file if logging is enabled.
      Additivity disabled.

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ðŸ§ª Console Appenders:
    - CONSOLE_WARN:
        - Outputs only WARN and above to console.
        - Pattern: HH:mm:ss.SSS %-5level [%thread] %logger{36} - %msg%n
        - Used by selective loggers to reduce noise.

    - CONSOLE:
        - Outputs all levels to console (used by root logger).
        - Pattern: HH:mm:ss.SSS %-5level [%thread] %logger{36} - %msg%n

  ðŸ“‚ File Appender:
    - Rolling file logs stored in /logs/framework.log directory.
	- Enabled conditionally via 'logging.enabled' system property (default true).
    - Time-based rolling policy:
        - File name pattern: logs/framework.{timestamp}.log
        - Retains up to 30 historical files
        - Total size capped at 100MB
    - Pattern: yyyy-MM-dd HH:mm:ss %-5level [%thread] %logger{36} - %msg%n

  ðŸš¨ Root Logger:
    - Level: INFO
    - Acts as fallback for uncategorized packages.
    - Logs routed to both CONSOLE and FILE appenders.

  ðŸ§  Notes:
    - To enable verbose debugging: change com.darkuros.selenium to DEBUG.
    - To suppress all INFO globally: change root level to WARN.
    - Dynamic verbosity toggling: use -Dlog.level=DEBUG and conditional config blocks.

  Last updated: 2025-10-09
-->
<configuration>

	<property name="LOGGING_ENABLED" value="${logging.enabled:-true}" />

	<!-- Package-specific logger for your entire framework -->
	<logger name="com.darkuros.selenium" level="INFO" additivity="false">
		<appender-ref ref="CONSOLE_WARN" />
		<if condition='property("LOGGING_ENABLED").equalsIgnoreCase("true")'>
			<then>
				<appender-ref ref="FILE" />
			</then>
		</if>
	</logger>

	<!-- Suppress TestNG internal logs -->
	<logger name="org.testng.internal" level="WARN" additivity="false">
		<appender-ref ref="CONSOLE_WARN" />
		<if condition='property("LOGGING_ENABLED").equalsIgnoreCase("true")'>
			<then>
				<appender-ref ref="FILE" />
			</then>
		</if>
	</logger>

	<!-- Suppress WebDriverManager logs -->
	<logger name="io.github.bonigarcia" level="WARN" additivity="false">
		<appender-ref ref="CONSOLE_WARN" />
		<if condition='property("LOGGING_ENABLED").equalsIgnoreCase("true")'>
			<then>
				<appender-ref ref="FILE" />
			</then>
		</if>
	</logger>

	<!-- Console Warn Appender -->
	<appender name="CONSOLE_WARN" class="ch.qos.logback.core.ConsoleAppender">
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>WARN</level>
		</filter>
		<encoder>
			<pattern>%d{HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n</pattern>
			<charset>UTF-8</charset>
		</encoder>
	</appender>

	<!-- Console Appender -->
	<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>%d{HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n</pattern>
			<charset>UTF-8</charset>
		</encoder>
	</appender>

	<!-- File Appender with Time-Based Rolling -->
	<appender name="FILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>logs/framework.log</file>
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>logs/framework.%d{yyyy-MM-dd_HH-mm-ss}.log</fileNamePattern>
			<maxHistory>30</maxHistory>
			<totalSizeCap>100MB</totalSizeCap>
		</rollingPolicy>
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36} -
				%msg%n</pattern>
			<charset>UTF-8</charset>
		</encoder>
	</appender>

	<!-- Root logger fallback -->
	<root level="INFO">
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="FILE" />
	</root>

</configuration>